---
layout: post
title: ç”¨ Python æ‰“é€  Youtube å½±ç‰‡ä¸‹è¼‰å°å¹«æ‰‹
date: 2025-02-04 19:17 +0800
categories: æŠ€è¡“åˆ†äº«
tags: [çˆ¬èŸ², è‡ªå‹•åŒ–, å¤šåª’é«”]
image:
    path: /assets/img/post_img/2025-02-06/pytube_cover.png
    alt: ç”¨ Python æ‰“é€  Youtube å½±ç‰‡ä¸‹è¼‰å°å¹«æ‰‹
---

## 0. è£½ä½œè‡ªå·±çš„ YT å½±ç‰‡ä¸‹è¼‰å·¥å…·

æœ€è¿‘å› ç‚ºè€å©†éœ€è¦å®£å°åè©ï¼Œéœ€è¦æœ‰ç›¸é—œå½±ç‰‡ç´ æè¬›èª²ï¼Œè«‹æˆ‘å¹«å¿™ä¸‹è¼‰YTä¸Šçš„å®£å°å½±ç‰‡ï¼Œä½†å…§å®¹å¯¦åœ¨æœ‰é»å¤šXD å¦‚æœè¦ç”¨ä¸€èˆ¬çš„ YT Online Downloader ä¸‹è¼‰å·¥å…·ï¼Œè¶…æµªè²»æ™‚é–“ä¸”ä¹Ÿæ€•é‡åˆ°é‡£é­šç¶²ç«™ï¼Œå¾Œä¾†æƒ³æƒ³é‚„æ˜¯è‡ªå·±æ‰‹å‹•ä¾†å¯«æ¯”è¼ƒå¯¦åœ¨~

å‰›å¥½çœ‹åˆ°ã€Œpytubeã€é€™å€‹å¥—ä»¶ï¼Œè©¦ç”¨ä¹‹å¾Œè¦ºå¾—è »å¥½ç”¨çš„ï¼Œé€™é‚Šæ¨è–¦çµ¦å¤§å®¶~

>ğŸ’¡ ç›®å‰ã€Œpytubeã€å¥—ä»¶ç›´æ¥ä½¿ç”¨æœƒæœ‰å•é¡Œï¼Œå»ºè­°æ”¹ç”¨ã€Œpytubefixã€çš„ä¿®è£œå¥—ä»¶ä¾†è™•ç†ã€‚
{: .prompt-info }

## 1. éœ€æ±‚åˆ†æ

### ğŸ¯ç›®æ¨™

è€å©†æä¾›çµ¦æˆ‘çš„ç›®æ¨™ç¶²å€ï¼š

[ä¸‰ä¸å®ˆå‰‡â€”ä¸ç•¶è»Šæ‰‹ã€ä¸å€Ÿå¸³æˆ¶ã€ä¸é»å¯ç–‘é€£çµï¼ˆ30ç§’å‹•ç•«ï¼‰](https://youtu.be/wckNGrZuoO8)

[å»¢æŸ´èˆ‡é˜²è©å°å¤©ä½¿çš„ä»»å‹™â€”ç ´è§£æŠ•è³‡è©é¨™ï¼ˆ30ç§’ç‰ˆï¼‰](https://youtu.be/WFG0nL-of2k)

[å†·éœæƒ³æƒ³åè©ç³»åˆ—_30ç§’](https://youtube.com/playlist?list=PLTpYQm9I7B0Zw0KU7qkjqLOIVqLljNf8G&si=P6pZTDmT9DWSryp-)

[è©é¨™å¥—è·¯ä¾†è§£å¯†ç³»åˆ—_30ç§’](https://youtube.com/playlist?list=PLTpYQm9I7B0ZPgE_LP_GfaPxrxydawDIP&si=eg2xrhAcIO3vUWzz)

### ğŸ§‘â€ğŸ’¼åŠŸèƒ½éœ€æ±‚

- å¯ä»¥è§€å¯Ÿåˆ°ï¼Œå‰å…©éƒ¨å½±ç‰‡æ˜¯å–®ä¸€å½±ç‰‡ï¼Œæ¯”è¼ƒå–®ç´”ï¼Œå¾Œå…©å€‹ç¶²å€å‰‡æ˜¯ã€ŒPlaylistã€æ’­æ”¾æ¸…å–®ï¼Œè£¡é¢åŒ…å«äº†å¤šéƒ¨å½±ç‰‡ã€‚
- æˆ‘å€‘æœŸæœ›è¼¸å…¥è¶Šå–®ç´”è¶Šå¥½ï¼Œè€å©†åªè¦æŠŠæƒ³è¦ä¸‹è¼‰çš„ç¶²å€æä¾›çµ¦ç³»çµ±ï¼Œä¸ç®¡é€£çµæ˜¯å–®ä¸€å½±ç‰‡ã€æ’­æ”¾æ¸…å–®ï¼Œç¨‹å¼éƒ½å¯ä»¥è‡ªå‹•è™•ç†ï¼Œæ‰¹æ¬¡ä¸‹è¼‰ã€‚
- é‡å°å–®ä¸€å½±ç‰‡ï¼Œç›´æ¥ä¸‹è¼‰å¾Œå­˜åˆ° `/Downloads/` è³‡æ–™å¤¾è£¡é¢ï¼Œè‹¥æ˜¯ Playlistï¼Œå‰‡è‡ªå‹•ç”Ÿæˆ `/Downloads/Playlist_name/` è³‡æ–™å¤¾ï¼ŒæŠŠè©²æ¸…å–®çš„å½±ç‰‡ç¨ç«‹ä¸‹è¼‰åˆ°ç‰¹å®šè³‡æ–™å¤¾ä¸­ã€‚

## 2. ç¨‹å¼æ’°å¯«

```python
import os
# è™•ç†SSLæ†‘è­‰é©—è­‰
import ssl
ssl._create_default_https_context = ssl._create_stdlib_context
# ä¸»è¦ç”¨ä¾†ä¸‹è¼‰ YT å½±ç‰‡çš„å·¥å…·
from pytubefix import YouTube, Playlist
```

```python
# Functionï¼šä¸‹è¼‰ YT ç¨‹å¼çš„ä¸»é‚è¼¯
def download_youtube_video(url_list, output_path="downloads"):
    try:
        for dir, url in url_list:
            # å»ºç«‹ä¸‹è¼‰è³‡æ–™å¤¾ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
            if not os.path.exists(output_path):
                os.makedirs(output_path)

            # å–å¾— YouTube å½±ç‰‡
            yt = YouTube(url)
            stream = yt.streams.get_highest_resolution()  # é¸æ“‡æœ€é«˜ç•«è³ª
            print(f"æ­£åœ¨ä¸‹è¼‰ï¼š{yt.title}")

            if dir:
                # ä¸‹è¼‰å½±ç‰‡
                stream.download(f"{output_path}/{dir}")
                print(f"ä¸‹è¼‰å®Œæˆï¼å½±ç‰‡å·²å„²å­˜æ–¼ï¼š{output_path}/{dir}/{yt.title}")
            else:
                # ä¸‹è¼‰å½±ç‰‡
                stream.download(output_path)
                print(f"ä¸‹è¼‰å®Œæˆï¼å½±ç‰‡å·²å„²å­˜æ–¼ï¼š{output_path}/{yt.title}")
            print("="*40)

    except Exception as e:
        print(f"ç™¼ç”ŸéŒ¯èª¤ï¼š{e}")

# Functionï¼šåˆ†ææ˜¯å½±ç‰‡é‚„æ˜¯æ’­æ”¾æ¸…å–®
def parse_url(url_list, output_path="downloads"):
    video_url_list = []
    for url in url_list:
        if "playlist" in url:
            playlist = Playlist(url)
            print(f"åµæ¸¬åˆ°æ’­æ”¾æ¸…å–®ï¼š{playlist.title}")
            # å»ºç«‹ä¸‹è¼‰è³‡æ–™å¤¾ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
            if not os.path.exists(output_path):
                os.makedirs(output_path)
            
            # é‡å°æ’­æ”¾æ¸…å–®å»ºç«‹è³‡æ–™å¤¾
            playlist_path = f"{output_path}/{playlist.title}"
            if not os.path.exists(playlist_path):
                os.makedirs(playlist_path)

            for url in playlist.video_urls:
                video_url_list.append([playlist.title, url])
        else:
            video_url_list.append([None, url])
    return video_url_list
```

- `download_youtube_video()` æ˜¯ç”¨ä¾†ä¸‹è¼‰å½±ç‰‡çš„ä¸»ç¨‹å¼ï¼Œåªè² è²¬æ¥æ”¶ç¶²å€ï¼Œä¸¦ä¸‹è¼‰åˆ°ç›®æ¨™è³‡æ–™å¤¾ã€‚
- `parse_url()` å‰‡æœƒå…ˆé€²è¡Œç¶²å€è§£æï¼Œåˆ†è¾¨ã€Œå–®ä¸€å½±ç‰‡ã€orã€Œæ’­æ”¾æ¸…å–®ã€ï¼Œåšå¥½æ­¸é¡(é å…ˆå»ºç«‹æ­¸æª”è³‡æ–™å¤¾)å¾Œï¼Œå†ä¸Ÿçµ¦ `download_youtube_video()` è™•ç†ï¼Œå°‡å·¥ä½œå–®ä¸€åŒ–ã€‚

```python
if __name__ == "__main__":
		# ç›®æ¨™ç¶²å€æ¸…å–®
    video_url_list = ["https://youtu.be/wckNGrZuoO8",
                      "https://youtu.be/WFG0nL-of2k",
                      "https://youtu.be/jNUWS6_5bNU?si=RVryWYN49IidO1_h",
                      "https://youtube.com/playlist?list=PLTpYQm9I7B0Zw0KU7qkjqLOIVqLljNf8G&si=P6pZTDmT9DWSryp-",
                      "https://youtube.com/playlist?list=PLTpYQm9I7B0ZPgE_LP_GfaPxrxydawDIP&si=eg2xrhAcIO3vUWzz"]
    # åˆ†æç¶²å€å±¬æ€§(ã€Œå–®ä¸€å½±ç‰‡ã€orã€Œæ’­æ”¾æ¸…å–®ã€)
    video_url_list = parse_url(video_url_list)
    # ä¸‹è¼‰å½±ç‰‡
    download_youtube_video(video_url_list, output_path="downloads")
```

- é€™é‚Šç”¨å¾ˆé™½æ˜¥ã€Œåˆ—æ¸…å–®ã€çš„æ–¹å¼ä¾†è¼¸å…¥ï¼Œæ˜¯è‡ªå·±å·æ‡¶~å¦‚æœè¦è®“é€™æ”¯ç¨‹å¼æ›´å„ªåŒ–ï¼Œé€™é‚Šå¯ä»¥æ”¹ç”¨ã€Œè®€å– Excelã€çš„æ–¹å¼ï¼Œè®“ä½¿ç”¨è€…è¼¸å…¥æ›´åŠ æ–¹ä¾¿èˆ‡ç›´è¦ºï¼Œé€™æ¨£è€å©†å°±ä¸ç”¨å†éº»ç…©æˆ‘äº†~ç¾åœ¨ç•™è‘—ï¼Œé‚„å¯ä»¥é¡¯å¾—è‡ªå·±é‚„æœ‰é»ç”¨è™• (èª¤ XD

## 3. çµèª

ä»¥ä¸Šåªæ˜¯å¾ˆå¿«é€Ÿåœ°å°‡åŸºç¤çš„å½±ç‰‡ä¸‹è¼‰ç¨‹å¼å‘ˆç¾å‡ºä¾†ï¼Œæ•´å€‹å®Œæˆç¨‹å¼å¤§æ¦‚åªèŠ±ä¸åˆ°30åˆ†é˜å³å¯å®Œæˆï¼Œå¾ŒçºŒç•¶ç„¶é‚„æœ‰å¾ˆå¤šå„ªåŒ–ç©ºé–“ï¼ŒåŒ…æ‹¬å°‡å…¶è£½ä½œæˆä¸€å€‹ç¶²ç«™æœå‹™æˆ–è€…å¢åŠ æ›´æ–¹ä¾¿ä½¿ç”¨è€…è¼¸å…¥ç¶²å€çš„å‰ç«¯ä»‹é¢ï¼Œå¦‚æœå°æ­¤æœ‰èˆˆè¶£ä¹Ÿå¯ä»¥è‡ªè¡Œå¤šå˜—è©¦ï¼ï¼
